<?xml version="1.0"?>

<project name="activiti-web" basedir="." default="deploy">
	<import file="../build-common-web.xml" />
	
	<target name="merge">
		<copy todir="tmp">
			<fileset dir="docroot" />
		</copy>
	</target>
	
	<target name="build-samples">
		<delete dir="samples" />
		<mkdir dir="samples" />
		
		<!-- todo -->
		<copy 
			file="docroot/WEB-INF/src/META-INF/definitions/todo.bpmn20.xml" 
			overwrite="true"
			tofile="samples/todo.bpmn20.xml"
		/>

		<jar
			basedir="samples"
			excludes="*.bar"
			jarfile="samples/ToDo.bar"
		/>

		<delete file="samples/todo.bpmn20.xml" />
		
		<!-- Administrator Task -->
		<copy 
			file="docroot/WEB-INF/src/META-INF/definitions/AdministratorTask.bpmn20.xml" 
			overwrite="true"
			tofile="samples/AdministratorTask.bpmn20.xml"
		/>

		<jar
			basedir="samples"
			excludes="*.bar"
			jarfile="samples/AdministratorTask.bar"
		/>

		<delete file="samples/AdministratorTask.bpmn20.xml" />
		
		<!-- Single Approver -->
		<copy 
			file="docroot/WEB-INF/src/META-INF/definitions/SingleApprover.bpmn20.xml" 
			overwrite="true"
			tofile="samples/SingleApprover.bpmn20.xml"
		/>

		<jar
			basedir="samples"
			excludes="*.bar"
			jarfile="samples/SingleApprover.bar"
		/>

		<delete file="samples/SingleApprover.bpmn20.xml" />
		
		<!-- Single Approver By Script -->
		<copy 
			file="docroot/WEB-INF/src/META-INF/definitions/SingleApproverByScript.bpmn20.xml" 
			overwrite="true"
			tofile="samples/SingleApproverByScript.bpmn20.xml"
		/>

		<jar
			basedir="samples"
			excludes="*.bar"
			jarfile="samples/SingleApproverByScript.bar"
		/>

		<delete file="samples/SingleApproverByScript.bpmn20.xml" />
	</target>	
</project>
